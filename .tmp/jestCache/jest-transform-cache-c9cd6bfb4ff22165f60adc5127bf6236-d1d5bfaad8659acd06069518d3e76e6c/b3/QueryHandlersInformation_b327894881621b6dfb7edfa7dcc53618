941461433e8e2b09ad25db2fb9f2f0e5
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const QueryNotRegisteredError_1 = __importDefault(require("@shared/domain/bus/query/QueryNotRegisteredError"));
class QueryHandlersInformation {
    constructor(queryHandlers) {
        this.queryHandlersMap = this.formatHandlers(queryHandlers);
    }
    search(query) {
        const queryHandler = this.queryHandlersMap.get(query.constructor);
        if (!queryHandler) {
            throw new QueryNotRegisteredError_1.default(query);
        }
        return queryHandler;
    }
    // eslint-disable-next-line class-methods-use-this
    formatHandlers(queryHandlers) {
        const handlersMap = new Map();
        queryHandlers.forEach((queryHandler) => {
            handlersMap.set(queryHandler.subscribedTo(), queryHandler);
        });
        return handlersMap;
    }
}
exports.default = QueryHandlersInformation;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvZmVycmFuL3VuaS9jb21wdXRhY2lvL25vem9tYS1mb3JrL3NyYy9jb250ZXh0cy9zaGFyZWQvaW5mcmEvYnVzL3F1ZXJ5L1F1ZXJ5SGFuZGxlcnNJbmZvcm1hdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUdBLCtHQUF1RjtBQUV2RixNQUFxQix3QkFBd0I7SUFHekMsWUFBWSxhQUE2RDtRQUNyRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBRU0sTUFBTSxDQUFDLEtBQVk7UUFDdEIsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFbEUsSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNmLE1BQU0sSUFBSSxpQ0FBdUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUM1QztRQUVELE9BQU8sWUFBWSxDQUFDO0lBQ3hCLENBQUM7SUFFRCxrREFBa0Q7SUFDMUMsY0FBYyxDQUNsQixhQUE2RDtRQUU3RCxNQUFNLFdBQVcsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBRTlCLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxZQUFZLEVBQUUsRUFBRTtZQUNuQyxXQUFXLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsRUFBRSxZQUFZLENBQUMsQ0FBQztRQUMvRCxDQUFDLENBQUMsQ0FBQztRQUVILE9BQU8sV0FBVyxDQUFDO0lBQ3ZCLENBQUM7Q0FDSjtBQTdCRCwyQ0E2QkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvZmVycmFuL3VuaS9jb21wdXRhY2lvL25vem9tYS1mb3JrL3NyYy9jb250ZXh0cy9zaGFyZWQvaW5mcmEvYnVzL3F1ZXJ5L1F1ZXJ5SGFuZGxlcnNJbmZvcm1hdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBRdWVyeSB9IGZyb20gXCJAc2hhcmVkL2RvbWFpbi9idXMvcXVlcnkvUXVlcnlcIjtcbmltcG9ydCB7IFF1ZXJ5SGFuZGxlciB9IGZyb20gXCJAc2hhcmVkL2RvbWFpbi9idXMvcXVlcnkvUXVlcnlIYW5kbGVyXCI7XG5pbXBvcnQgUXVlcnlSZXNwb25zZSBmcm9tIFwiQHNoYXJlZC9kb21haW4vYnVzL3F1ZXJ5L1F1ZXJ5UmVzcG9uc2VcIjtcbmltcG9ydCBRdWVyeU5vdFJlZ2lzdGVyZWRFcnJvciBmcm9tIFwiQHNoYXJlZC9kb21haW4vYnVzL3F1ZXJ5L1F1ZXJ5Tm90UmVnaXN0ZXJlZEVycm9yXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFF1ZXJ5SGFuZGxlcnNJbmZvcm1hdGlvbiB7XG4gICAgcHJpdmF0ZSBxdWVyeUhhbmRsZXJzTWFwOiBNYXA8UXVlcnksIFF1ZXJ5SGFuZGxlcjxRdWVyeSwgUXVlcnlSZXNwb25zZTxhbnk+Pj47XG5cbiAgICBjb25zdHJ1Y3RvcihxdWVyeUhhbmRsZXJzOiBBcnJheTxRdWVyeUhhbmRsZXI8UXVlcnksIFF1ZXJ5UmVzcG9uc2U8YW55Pj4+KSB7XG4gICAgICAgIHRoaXMucXVlcnlIYW5kbGVyc01hcCA9IHRoaXMuZm9ybWF0SGFuZGxlcnMocXVlcnlIYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIHNlYXJjaChxdWVyeTogUXVlcnkpOiBRdWVyeUhhbmRsZXI8UXVlcnksIFF1ZXJ5UmVzcG9uc2U8YW55Pj4ge1xuICAgICAgICBjb25zdCBxdWVyeUhhbmRsZXIgPSB0aGlzLnF1ZXJ5SGFuZGxlcnNNYXAuZ2V0KHF1ZXJ5LmNvbnN0cnVjdG9yKTtcblxuICAgICAgICBpZiAoIXF1ZXJ5SGFuZGxlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFF1ZXJ5Tm90UmVnaXN0ZXJlZEVycm9yKHF1ZXJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBxdWVyeUhhbmRsZXI7XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgICBwcml2YXRlIGZvcm1hdEhhbmRsZXJzKFxuICAgICAgICBxdWVyeUhhbmRsZXJzOiBBcnJheTxRdWVyeUhhbmRsZXI8UXVlcnksIFF1ZXJ5UmVzcG9uc2U8YW55Pj4+XG4gICAgKTogTWFwPFF1ZXJ5LCBRdWVyeUhhbmRsZXI8UXVlcnksIFF1ZXJ5UmVzcG9uc2U8YW55Pj4+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlcnNNYXAgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgcXVlcnlIYW5kbGVycy5mb3JFYWNoKChxdWVyeUhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGhhbmRsZXJzTWFwLnNldChxdWVyeUhhbmRsZXIuc3Vic2NyaWJlZFRvKCksIHF1ZXJ5SGFuZGxlcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBoYW5kbGVyc01hcDtcbiAgICB9XG59XG4iXSwidmVyc2lvbiI6M30=